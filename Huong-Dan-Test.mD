# ğŸ§ª HÆ°á»›ng Dáº«n Testing - Browser-MCP-Control System

## ğŸ¯ Tá»•ng Quan Há»‡ Thá»‘ng Testing

**Má»¥c tiÃªu**: HÆ°á»›ng dáº«n chi tiáº¿t setup vÃ  test Browser-MCP-Control system trÃªn Windows environment

**Kiáº¿n trÃºc testing**: CLI Tool â†’ MCP Server â†’ Chrome Extension â†’ Browser Console

---

## ğŸ“‹ YÃªu Cáº§u Há»‡ Thá»‘ng

### **Pháº§n má»m cáº§n thiáº¿t:**
- âœ… **Node.js** >= 16.0.0
- âœ… **npm** package manager  
- âœ… **Google Chrome** browser
- âœ… **Git** for version control
- âœ… **PowerShell** (Windows terminal)

### **Kiá»ƒm tra mÃ´i trÆ°á»ng:**
```powershell
# Kiá»ƒm tra Node.js version
node --version

# Kiá»ƒm tra npm version  
npm --version

# Kiá»ƒm tra Chrome
google-chrome --version
# hoáº·c
"C:\Program Files\Google\Chrome\Application\chrome.exe" --version
```

---

## ğŸš€ Setup Testing Environment

### **BÆ°á»›c 1: Clone Project tá»« GitHub**
```powershell
# Má»Ÿ PowerShell
cd C:\Users\boybo\Desktop

# Clone repository
git clone https://github.com/quangman2211/Browser-MCP-Control.git

# Navigate vÃ o project folder
cd Browser-MCP-Control

# Verify project structure
dir
```

**Expected structure:**
```
Browser-MCP-Control\
â”œâ”€â”€ src\
â”‚   â”œâ”€â”€ server\     # Mike's MCP Server âš™ï¸
â”‚   â”œâ”€â”€ cli\        # Emma's CLI tool ğŸ”§
â”‚   â””â”€â”€ extension\  # Sarah's Chrome Extension ğŸ’»
â”œâ”€â”€ tests\          # David's E2E tests ğŸ§ª
â”œâ”€â”€ docs\           # Documentation ğŸ“š
â”œâ”€â”€ README.md
â””â”€â”€ CLAUDE.md
```

### **BÆ°á»›c 2: Install Dependencies**

#### **2.1 MCP Server Dependencies**
```powershell
cd src\server
npm install

# Expected packages:
# - express (HTTP server)
# - ws (WebSocket server)  
# - cors (Cross-origin requests)
# - helmet (Security headers)
# - uuid (Unique IDs)
# - winston (Logging)
# - joi (Validation)
```

#### **2.2 CLI Dependencies**
```powershell
cd ..\cli
npm install

# Expected packages:
# - commander (CLI framework)
# - axios (HTTP client)
# - chalk (Terminal colors)
# - ora (Loading spinners)
# - inquirer (Interactive prompts)
# - figlet (ASCII art)
# - conf (Configuration management)
```

#### **2.3 Testing Dependencies**
```powershell
cd ..\..\tests
npm install

# Expected packages:
# - puppeteer (Browser automation)
# - jest (Testing framework)
```

---

## ğŸƒâ€â™‚ï¸ Khá»Ÿi Äá»™ng Há»‡ Thá»‘ng

### **Terminal 1: Start MCP Server**
```powershell
# Navigate to server directory
cd C:\Users\boybo\Desktop\Browser-MCP-Control\src\server

# Start MCP Server
node server.js

# âœ… Expected Output:
# ğŸš€ Browser-MCP-Control Server started by Mike âš™ï¸
# ğŸ“¡ HTTP Server: http://localhost:3000
# ğŸ”— WebSocket Server: ws://localhost:3000
# ğŸ› ï¸ MCP Tools: 1 registered
# ğŸ’» Ready for Chrome Extension vÃ  CLI integration!
#
# === MCP Server Endpoints ===
# Health Check: http://localhost:3000/health
# Tool Discovery: http://localhost:3000/api/tools
# Tool Execution: http://localhost:3000/api/tools/:toolName/call
# System Status: http://localhost:3000/api/tools/status
# WebSocket: ws://localhost:3000
# ============================
```

**â— LÆ°u terminal nÃ y cháº¡y trong suá»‘t quÃ¡ trÃ¬nh testing**

### **Setup Chrome Extension**
1. **Má»Ÿ Chrome browser**
2. **Navigate to Extensions**: `chrome://extensions/`
3. **Enable Developer Mode**: Toggle switch á»Ÿ gÃ³c trÃªn pháº£i
4. **Load Extension**: 
   - Click "Load unpacked"
   - Select folder: `C:\Users\boybo\Desktop\Browser-MCP-Control\src\extension`
5. **Verify Loading**: Extension xuáº¥t hiá»‡n vá»›i tÃªn "Browser-MCP-Control Extension"

### **Verify Extension Connection**
1. **Má»Ÿ Chrome DevTools**: F12 hoáº·c Right-click â†’ Inspect
2. **Check Console Tab**: Should see message:
   ```
   ğŸŸ¢ Extension: Connected to MCP Server
   ```
3. **Check Extension Background**: 
   - Go to `chrome://extensions/`
   - Click "Service Worker" under your extension
   - Should see connection logs

---

## ğŸ§ª Testing Procedures

### **Test 1: Basic System Health Check**

#### **Terminal 2: CLI Health Check**
```powershell
# Navigate to CLI directory
cd C:\Users\boybo\Desktop\Browser-MCP-Control\src\cli

# Test basic connection
node index.js mcp status

# âœ… Expected Output:
# ğŸ¥ MCP System Health:
#   Server Status: healthy
#   Uptime: XXXs
#   Tool Registry: 1 tools
#   Extensions Connected: 1
#
# ğŸ“Š Tool Registry:
#   ğŸ”§ mcp:tool.console_hello
#
# ğŸ“ˆ Server Statistics:
#   Total Tool Calls: 0
#   Tool Executions: 0
#   Active Connections: 1
```

### **Test 2: MCP Tool Discovery**
```powershell
# Discover available MCP tools
node index.js mcp tools

# âœ… Expected Output:
# ğŸ“‹ Available MCP Tools:
#
# ğŸ”§ mcp:tool.console_hello
#    Execute console.log in browser tab
```

#### **Test with verbose output:**
```powershell
node index.js mcp tools --verbose

# âœ… Expected Output:
# ğŸ“‹ Available MCP Tools:
#
# ğŸ”§ mcp:tool.console_hello
#    Execute console.log in browser tab
#    Category: browser_control
#    Version: 1.0.0
#    Agent: mike
#    Parameters:
#      â€¢ message (string): Message to log to console
#    Example: Basic console hello
#    Stats: 0 calls, 0% success rate
```

### **Test 3: Console Execution (Core Functionality)**

#### **Prepare Browser:**
1. **Open any website** (e.g., google.com, github.com)
2. **Open DevTools**: F12 â†’ Console tab
3. **Clear console**: Ctrl+L or click clear button

#### **Execute Console Command:**
```powershell
# Basic console execution
node index.js mcp-browser console-hello

# âœ… Expected CLI Output:
# ğŸŒ MCP Browser Execution Result:
#   Message: "Hello World"
#   Tool: mcp:tool.console_hello
#   Timestamp: 8/4/2024, 10:30:45 AM
#   Execution Time: 150ms
#   Browser Info:
#     Tab: Google
#     URL: https://google.com
#
# âœ… Check browser DevTools Console to see the message!
```

#### **Expected Browser Console Output:**
```javascript
Hello World
```

#### **Expected Visual Confirmation:**
- Green overlay appears briefly in browser vá»›i message "Console executed: Hello World"
- Overlay fades out after 2 seconds

### **Test 4: Custom Message Testing**
```powershell
# Test vá»›i custom message
node index.js mcp-browser console-hello "Testing from Windows CLI! ğŸ‰"

# Test vá»›i Vietnamese message
node index.js mcp-browser console-hello "Xin chÃ o tá»« CLI!"

# Test vá»›i special characters
node index.js mcp-browser console-hello "Testing: @#$%^&*()_+-={}[]|\\:;\"'<>?,./"
```

### **Test 5: Error Handling & Resilience**

#### **Test server connection issues:**
```powershell
# Stop MCP Server (Ctrl+C in Terminal 1)
# Then try CLI command
node index.js mcp-browser console-hello

# âœ… Expected Error Output:
# âŒ MCP Console Execution Error:
#   Connection refused. Make sure MCP Server is running:
#   cd src\server && node server.js
#
# ğŸ’¡ Troubleshooting:
#   1. Check MCP Server is running: node src\server\server.js
#   2. Check Chrome Extension is loaded vÃ  connected
#   3. Use "mcp status" to check system health
```

#### **Test vá»›i retry logic:**
```powershell
# Restart MCP Server first
# Test vá»›i retry attempts
node index.js mcp-browser console-hello --retry 5 "Retry test message"
```

### **Test 6: Performance Testing**
```powershell
# Test execution speed (should be < 2 seconds)
Measure-Command { node index.js mcp-browser console-hello "Performance test" }

# Expected: TotalMilliseconds < 2000
```

---

## ğŸ¤– Automated E2E Testing

### **Run Complete Test Suite**
```powershell
# Navigate to tests directory
cd C:\Users\boybo\Desktop\Browser-MCP-Control\tests

# Run basic test suite
npm test

# Run full E2E tests (requires MCP Server + Extension running)
npm run e2e

# Run tests in headless mode
npm run e2e:headless

# Run quick validation
npm run e2e:validate
```

### **Individual Test Scenarios**
```powershell
# Test system integration
node -e "
const test = require('./e2e/browser-mcp-control.test.js');
test.runSystemIntegrationTest();
"

# Test console execution
node -e "
const test = require('./e2e/browser-mcp-control.test.js');
test.runConsoleExecutionTest();
"

# Test error handling
node -e "
const test = require('./e2e/browser-mcp-control.test.js');
test.runErrorHandlingTest();
"
```

---

## ğŸ“Š Test Results Validation

### **âœ… Success Criteria**

#### **System Health:**
- MCP Server starts without errors
- Chrome Extension connects successfully  
- CLI commands execute without timeouts
- Browser console shows expected output
- Visual confirmation appears vÃ  fades

#### **Performance Targets:**
- **Execution Time**: < 2000ms (CLI â†’ Browser console)
- **Success Rate**: > 95% in repeated testing
- **Connection Time**: < 1000ms (Extension â†’ Server)
- **Memory Usage**: Stable, no memory leaks

#### **Functional Requirements:**
- Console.log appears in browser DevTools
- Custom messages display correctly
- Vietnamese vÃ  special characters supported
- Error messages are clear vÃ  helpful
- Retry logic works for transient failures

### **ğŸ” Debugging Tools**

#### **Server Debugging:**
```powershell
# Start server vá»›i debug mode
cd src\server
node --inspect server.js

# Open Chrome DevTools for server debugging:
# chrome://inspect â†’ Open dedicated DevTools for Node
```

#### **CLI Debugging:**
```powershell
# Verbose CLI output
node index.js mcp-browser console-hello --verbose

# CLI vá»›i custom timeout
node index.js mcp-browser console-hello --timeout 10000
```

#### **Extension Debugging:**
1. **Background Script Debug**:
   - Go to `chrome://extensions/`  
   - Click "Service Worker" under extension
   - Use Console vÃ  Sources tabs

2. **Content Script Debug**:
   - Open website DevTools (F12)
   - Check Console for extension logs
   - Look for messages starting with "ğŸŸ¢ Extension:"

#### **Network Debugging:**
```powershell
# Test server endpoints directly
curl http://localhost:3000/health
curl http://localhost:3000/api/tools
curl http://localhost:3000/api/tools/status

# Test WebSocket connection
# Use browser DevTools â†’ Network â†’ WS tab
```

---

## ğŸš¨ Troubleshooting Guide

### **Common Issues & Solutions**

#### **Issue 1: MCP Server Won't Start**
```
Error: listen EADDRINUSE :::3000
```
**Solution:**
```powershell
# Find process using port 3000
netstat -ano | findstr :3000

# Kill the process (replace PID)
taskkill /PID <PID> /F

# Or use different port
$env:PORT=3001; node server.js
```

#### **Issue 2: Chrome Extension Not Loading**
**Symptoms:** Extension not visible in chrome://extensions/

**Solutions:**
1. **Refresh Extensions Page**: Ctrl+R on chrome://extensions/
2. **Check Manifest**: Verify `src\extension\manifest.json` exists
3. **Clear Extension**: Remove â†’ Reload unpacked
4. **Check Permissions**: Ensure Chrome has file access permissions

#### **Issue 3: Extension Not Connecting to Server**
**Symptoms:** No "Connected to MCP Server" message in console

**Solutions:**
1. **Check Server**: Ensure MCP Server running on localhost:3000
2. **Firewall**: Disable Windows Firewall temporarily
3. **Browser Console**: Check for WebSocket connection errors
4. **Extension Reload**: Reload extension in chrome://extensions/

#### **Issue 4: CLI Commands Fail**
**Symptoms:** "Connection refused" or timeout errors

**Solutions:**
1. **Server Check**: `curl http://localhost:3000/health`
2. **Port Check**: `netstat -ano | findstr :3000`
3. **Antivirus**: Temporarily disable antivirus
4. **Network**: Check localhost resolution: `ping localhost`

#### **Issue 5: Console Output Not Appearing**
**Symptoms:** CLI succeeds but no browser console output

**Solutions:**
1. **DevTools**: Ensure DevTools Console tab is open
2. **Console Filter**: Check console filter settings (All levels)
3. **Page Refresh**: Refresh browser page vÃ  try again
4. **Extension Status**: Verify extension background script running

#### **Issue 6: E2E Tests Failing**
**Symptoms:** Puppeteer tests timeout or fail

**Solutions:**
1. **Puppeteer Chrome**: Install Chrome for Puppeteer:
   ```powershell
   npm install puppeteer
   ```
2. **Headless Mode**: Try headless testing:
   ```powershell
   npm run e2e:headless
   ```
3. **Test Dependencies**: Reinstall test dependencies:
   ```powershell
   cd tests
   npm install
   ```

---

## ğŸ“ˆ Performance Monitoring

### **Execution Time Monitoring**
```powershell
# Measure CLI execution time
Measure-Command { node index.js mcp-browser console-hello "Performance test" }

# Multiple runs for average
for ($i=1; $i -le 10; $i++) {
    Write-Host "Run $i:"
    Measure-Command { node index.js mcp-browser console-hello "Test $i" }
}
```

### **Success Rate Testing**
```powershell
# Run 20 consecutive tests
$success = 0
$total = 20

for ($i=1; $i -le $total; $i++) {
    try {
        node index.js mcp-browser console-hello "Test $i" 2>$null
        if ($LASTEXITCODE -eq 0) { $success++ }
    } catch {}
    Start-Sleep -Milliseconds 500
}

Write-Host "Success Rate: $($success/$total*100)%"
```

---

## ğŸ¯ Advanced Testing Scenarios

### **Concurrent Execution Testing**
```powershell
# Test multiple simultaneous commands
Start-Job { node index.js mcp-browser console-hello "Job 1" }
Start-Job { node index.js mcp-browser console-hello "Job 2" }  
Start-Job { node index.js mcp-browser console-hello "Job 3" }

# Check job results
Get-Job | Receive-Job
```

### **Load Testing**
```powershell
# Rapid consecutive execution
for ($i=1; $i -le 50; $i++) {
    node index.js mcp-browser console-hello "Load test $i"
    Start-Sleep -Milliseconds 100
}
```

### **Cross-Browser Testing**
1. **Chrome**: Primary testing browser
2. **Edge**: Test extension compatibility
3. **Chrome Canary**: Test vá»›i latest Chrome features

---

## ğŸ† Success Validation Checklist

### **âœ… Pre-Testing Checklist**
- [ ] Node.js >= 16.0.0 installed
- [ ] All dependencies installed successfully
- [ ] Chrome browser available
- [ ] Project cloned from GitHub
- [ ] No port conflicts on 3000

### **âœ… System Integration Checklist**
- [ ] MCP Server starts without errors
- [ ] Server health endpoint responds
- [ ] Chrome Extension loads successfully
- [ ] Extension connects to WebSocket server
- [ ] CLI status command shows healthy system

### **âœ… Functional Testing Checklist**
- [ ] Basic console-hello executes successfully
- [ ] Custom messages appear in browser console
- [ ] Visual confirmation overlay appears
- [ ] CLI shows execution results
- [ ] Response time < 2 seconds
- [ ] Vietnamese characters supported
- [ ] Special characters handled correctly
- [ ] Error handling works for offline scenarios

### **âœ… E2E Testing Checklist**
- [ ] Automated tests pass
- [ ] Browser automation works
- [ ] Console output captured programmatically
- [ ] Performance tests meet targets
- [ ] Concurrent execution stable
- [ ] Success rate > 95%

---

## ğŸ“ Support & Resources

### **Documentation:**
- **README.md**: Project overview vÃ  quick start
- **CLAUDE.md**: 11 Golden Rules vÃ  development guidelines
- **docs/**: Comprehensive technical documentation

### **Code Structure:**
- **src/server/**: Mike's MCP Server implementation
- **src/cli/**: Emma's CLI tool implementation  
- **src/extension/**: Sarah's Chrome Extension implementation
- **tests/**: David's E2E testing framework

### **GitHub Repository:**
- **URL**: https://github.com/quangman2211/Browser-MCP-Control
- **Issues**: Report bugs vÃ  feature requests
- **Wiki**: Additional documentation vÃ  examples

---

**ğŸ‰ Happy Testing! Há»‡ thá»‘ng Browser-MCP-Control ready for AI-driven browser automation!**

*Last updated: August 4, 2024*
*Generated by Browser-MCP-Control Multi-Agent Team*